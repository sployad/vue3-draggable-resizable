(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t(require("vue")):"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["Vue3DraggableResizable"]=t(require("vue")):e["Vue3DraggableResizable"]=t(e["Vue"])})("undefined"!==typeof self?self:this,(function(e){return function(){var t={9662:function(e,t,n){var r=n(614),o=n(6330),i=TypeError;e.exports=function(e){if(r(e))return e;throw i(o(e)+" is not a function")}},9670:function(e,t,n){var r=n(111),o=String,i=TypeError;e.exports=function(e){if(r(e))return e;throw i(o(e)+" is not an object")}},1318:function(e,t,n){var r=n(5656),o=n(1400),i=n(6244),a=function(e){return function(t,n,a){var u,l=r(t),s=i(l),c=o(a,s);if(e&&n!=n){while(s>c)if(u=l[c++],u!=u)return!0}else for(;s>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},3658:function(e,t,n){"use strict";var r=n(9781),o=n(3157),i=TypeError,a=Object.getOwnPropertyDescriptor,u=r&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=u?function(e,t){if(o(e)&&!a(e,"length").writable)throw i("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},4326:function(e,t,n){var r=n(1702),o=r({}.toString),i=r("".slice);e.exports=function(e){return i(o(e),8,-1)}},9920:function(e,t,n){var r=n(2597),o=n(3887),i=n(1236),a=n(3070);e.exports=function(e,t,n){for(var u=o(t),l=a.f,s=i.f,c=0;c<u.length;c++){var f=u[c];r(e,f)||n&&r(n,f)||l(e,f,s(t,f))}}},8880:function(e,t,n){var r=n(9781),o=n(3070),i=n(9114);e.exports=r?function(e,t,n){return o.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},9114:function(e){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},8052:function(e,t,n){var r=n(614),o=n(3070),i=n(6339),a=n(3072);e.exports=function(e,t,n,u){u||(u={});var l=u.enumerable,s=void 0!==u.name?u.name:t;if(r(n)&&i(n,s,u),u.global)l?e[t]=n:a(t,n);else{try{u.unsafe?e[t]&&(l=!0):delete e[t]}catch(c){}l?e[t]=n:o.f(e,t,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}},3072:function(e,t,n){var r=n(7854),o=Object.defineProperty;e.exports=function(e,t){try{o(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},9781:function(e,t,n){var r=n(7293);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4154:function(e){var t="object"==typeof document&&document.all,n="undefined"==typeof t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},317:function(e,t,n){var r=n(7854),o=n(111),i=r.document,a=o(i)&&o(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},7207:function(e){var t=TypeError,n=9007199254740991;e.exports=function(e){if(e>n)throw t("Maximum allowed index exceeded");return e}},8113:function(e){e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7392:function(e,t,n){var r,o,i=n(7854),a=n(8113),u=i.process,l=i.Deno,s=u&&u.versions||l&&l.version,c=s&&s.v8;c&&(r=c.split("."),o=r[0]>0&&r[0]<4?1:+(r[0]+r[1])),!o&&a&&(r=a.match(/Edge\/(\d+)/),(!r||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/),r&&(o=+r[1]))),e.exports=o},748:function(e){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2109:function(e,t,n){var r=n(7854),o=n(1236).f,i=n(8880),a=n(8052),u=n(3072),l=n(9920),s=n(4705);e.exports=function(e,t){var n,c,f,p,d,h,v=e.target,g=e.global,m=e.stat;if(c=g?r:m?r[v]||u(v,{}):(r[v]||{}).prototype,c)for(f in t){if(d=t[f],e.dontCallGetSet?(h=o(c,f),p=h&&h.value):p=c[f],n=s(g?f:v+(m?".":"#")+f,e.forced),!n&&void 0!==p){if(typeof d==typeof p)continue;l(d,p)}(e.sham||p&&p.sham)&&i(d,"sham",!0),a(c,f,d,e)}}},7293:function(e){e.exports=function(e){try{return!!e()}catch(t){return!0}}},4374:function(e,t,n){var r=n(7293);e.exports=!r((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},6916:function(e,t,n){var r=n(4374),o=Function.prototype.call;e.exports=r?o.bind(o):function(){return o.apply(o,arguments)}},6530:function(e,t,n){var r=n(9781),o=n(2597),i=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,u=o(i,"name"),l=u&&"something"===function(){}.name,s=u&&(!r||r&&a(i,"name").configurable);e.exports={EXISTS:u,PROPER:l,CONFIGURABLE:s}},1702:function(e,t,n){var r=n(4374),o=Function.prototype,i=o.call,a=r&&o.bind.bind(i,i);e.exports=r?a:function(e){return function(){return i.apply(e,arguments)}}},5005:function(e,t,n){var r=n(7854),o=n(614),i=function(e){return o(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?i(r[e]):r[e]&&r[e][t]}},8173:function(e,t,n){var r=n(9662),o=n(8554);e.exports=function(e,t){var n=e[t];return o(n)?void 0:r(n)}},7854:function(e,t,n){var r=function(e){return e&&e.Math==Math&&e};e.exports=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof n.g&&n.g)||function(){return this}()||this||Function("return this")()},2597:function(e,t,n){var r=n(1702),o=n(7908),i=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return i(o(e),t)}},3501:function(e){e.exports={}},4664:function(e,t,n){var r=n(9781),o=n(7293),i=n(317);e.exports=!r&&!o((function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a}))},8361:function(e,t,n){var r=n(1702),o=n(7293),i=n(4326),a=Object,u=r("".split);e.exports=o((function(){return!a("z").propertyIsEnumerable(0)}))?function(e){return"String"==i(e)?u(e,""):a(e)}:a},2788:function(e,t,n){var r=n(1702),o=n(614),i=n(5465),a=r(Function.toString);o(i.inspectSource)||(i.inspectSource=function(e){return a(e)}),e.exports=i.inspectSource},9909:function(e,t,n){var r,o,i,a=n(4811),u=n(7854),l=n(111),s=n(8880),c=n(2597),f=n(5465),p=n(6200),d=n(3501),h="Object already initialized",v=u.TypeError,g=u.WeakMap,m=function(e){return i(e)?o(e):r(e,{})},y=function(e){return function(t){var n;if(!l(t)||(n=o(t)).type!==e)throw v("Incompatible receiver, "+e+" required");return n}};if(a||f.state){var b=f.state||(f.state=new g);b.get=b.get,b.has=b.has,b.set=b.set,r=function(e,t){if(b.has(e))throw v(h);return t.facade=e,b.set(e,t),t},o=function(e){return b.get(e)||{}},i=function(e){return b.has(e)}}else{var x=p("state");d[x]=!0,r=function(e,t){if(c(e,x))throw v(h);return t.facade=e,s(e,x,t),t},o=function(e){return c(e,x)?e[x]:{}},i=function(e){return c(e,x)}}e.exports={set:r,get:o,has:i,enforce:m,getterFor:y}},3157:function(e,t,n){var r=n(4326);e.exports=Array.isArray||function(e){return"Array"==r(e)}},614:function(e,t,n){var r=n(4154),o=r.all;e.exports=r.IS_HTMLDDA?function(e){return"function"==typeof e||e===o}:function(e){return"function"==typeof e}},4705:function(e,t,n){var r=n(7293),o=n(614),i=/#|\.prototype\./,a=function(e,t){var n=l[u(e)];return n==c||n!=s&&(o(t)?r(t):!!t)},u=a.normalize=function(e){return String(e).replace(i,".").toLowerCase()},l=a.data={},s=a.NATIVE="N",c=a.POLYFILL="P";e.exports=a},8554:function(e){e.exports=function(e){return null===e||void 0===e}},111:function(e,t,n){var r=n(614),o=n(4154),i=o.all;e.exports=o.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:r(e)||e===i}:function(e){return"object"==typeof e?null!==e:r(e)}},1913:function(e){e.exports=!1},2190:function(e,t,n){var r=n(5005),o=n(614),i=n(7976),a=n(3307),u=Object;e.exports=a?function(e){return"symbol"==typeof e}:function(e){var t=r("Symbol");return o(t)&&i(t.prototype,u(e))}},6244:function(e,t,n){var r=n(7466);e.exports=function(e){return r(e.length)}},6339:function(e,t,n){var r=n(1702),o=n(7293),i=n(614),a=n(2597),u=n(9781),l=n(6530).CONFIGURABLE,s=n(2788),c=n(9909),f=c.enforce,p=c.get,d=String,h=Object.defineProperty,v=r("".slice),g=r("".replace),m=r([].join),y=u&&!o((function(){return 8!==h((function(){}),"length",{value:8}).length})),b=String(String).split("String"),x=e.exports=function(e,t,n){"Symbol("===v(d(t),0,7)&&(t="["+g(d(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!a(e,"name")||l&&e.name!==t)&&(u?h(e,"name",{value:t,configurable:!0}):e.name=t),y&&n&&a(n,"arity")&&e.length!==n.arity&&h(e,"length",{value:n.arity});try{n&&a(n,"constructor")&&n.constructor?u&&h(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var r=f(e);return a(r,"source")||(r.source=m(b,"string"==typeof t?t:"")),e};Function.prototype.toString=x((function(){return i(this)&&p(this).source||s(this)}),"toString")},4758:function(e){var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var r=+e;return(r>0?n:t)(r)}},3070:function(e,t,n){var r=n(9781),o=n(4664),i=n(3353),a=n(9670),u=n(4948),l=TypeError,s=Object.defineProperty,c=Object.getOwnPropertyDescriptor,f="enumerable",p="configurable",d="writable";t.f=r?i?function(e,t,n){if(a(e),t=u(t),a(n),"function"===typeof e&&"prototype"===t&&"value"in n&&d in n&&!n[d]){var r=c(e,t);r&&r[d]&&(e[t]=n.value,n={configurable:p in n?n[p]:r[p],enumerable:f in n?n[f]:r[f],writable:!1})}return s(e,t,n)}:s:function(e,t,n){if(a(e),t=u(t),a(n),o)try{return s(e,t,n)}catch(r){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},1236:function(e,t,n){var r=n(9781),o=n(6916),i=n(5296),a=n(9114),u=n(5656),l=n(4948),s=n(2597),c=n(4664),f=Object.getOwnPropertyDescriptor;t.f=r?f:function(e,t){if(e=u(e),t=l(t),c)try{return f(e,t)}catch(n){}if(s(e,t))return a(!o(i.f,e,t),e[t])}},8006:function(e,t,n){var r=n(6324),o=n(748),i=o.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},5181:function(e,t){t.f=Object.getOwnPropertySymbols},7976:function(e,t,n){var r=n(1702);e.exports=r({}.isPrototypeOf)},6324:function(e,t,n){var r=n(1702),o=n(2597),i=n(5656),a=n(1318).indexOf,u=n(3501),l=r([].push);e.exports=function(e,t){var n,r=i(e),s=0,c=[];for(n in r)!o(u,n)&&o(r,n)&&l(c,n);while(t.length>s)o(r,n=t[s++])&&(~a(c,n)||l(c,n));return c}},5296:function(e,t){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);t.f=o?function(e){var t=r(this,e);return!!t&&t.enumerable}:n},2140:function(e,t,n){var r=n(6916),o=n(614),i=n(111),a=TypeError;e.exports=function(e,t){var n,u;if("string"===t&&o(n=e.toString)&&!i(u=r(n,e)))return u;if(o(n=e.valueOf)&&!i(u=r(n,e)))return u;if("string"!==t&&o(n=e.toString)&&!i(u=r(n,e)))return u;throw a("Can't convert object to primitive value")}},3887:function(e,t,n){var r=n(5005),o=n(1702),i=n(8006),a=n(5181),u=n(9670),l=o([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=i.f(u(e)),n=a.f;return n?l(t,n(e)):t}},4488:function(e,t,n){var r=n(8554),o=TypeError;e.exports=function(e){if(r(e))throw o("Can't call method on "+e);return e}},6200:function(e,t,n){var r=n(2309),o=n(9711),i=r("keys");e.exports=function(e){return i[e]||(i[e]=o(e))}},5465:function(e,t,n){var r=n(7854),o=n(3072),i="__core-js_shared__",a=r[i]||o(i,{});e.exports=a},2309:function(e,t,n){var r=n(1913),o=n(5465);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.0",mode:r?"pure":"global",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6293:function(e,t,n){var r=n(7392),o=n(7293),i=n(7854),a=i.String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol();return!a(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},1400:function(e,t,n){var r=n(9303),o=Math.max,i=Math.min;e.exports=function(e,t){var n=r(e);return n<0?o(n+t,0):i(n,t)}},5656:function(e,t,n){var r=n(8361),o=n(4488);e.exports=function(e){return r(o(e))}},9303:function(e,t,n){var r=n(4758);e.exports=function(e){var t=+e;return t!==t||0===t?0:r(t)}},7466:function(e,t,n){var r=n(9303),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},7908:function(e,t,n){var r=n(4488),o=Object;e.exports=function(e){return o(r(e))}},7593:function(e,t,n){var r=n(6916),o=n(111),i=n(2190),a=n(8173),u=n(2140),l=n(5112),s=TypeError,c=l("toPrimitive");e.exports=function(e,t){if(!o(e)||i(e))return e;var n,l=a(e,c);if(l){if(void 0===t&&(t="default"),n=r(l,e,t),!o(n)||i(n))return n;throw s("Can't convert object to primitive value")}return void 0===t&&(t="number"),u(e,t)}},4948:function(e,t,n){var r=n(7593),o=n(2190);e.exports=function(e){var t=r(e,"string");return o(t)?t:t+""}},6330:function(e){var t=String;e.exports=function(e){try{return t(e)}catch(n){return"Object"}}},9711:function(e,t,n){var r=n(1702),o=0,i=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++o+i,36)}},3307:function(e,t,n){var r=n(6293);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3353:function(e,t,n){var r=n(9781),o=n(7293);e.exports=r&&o((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},4811:function(e,t,n){var r=n(7854),o=n(614),i=r.WeakMap;e.exports=o(i)&&/native code/.test(String(i))},5112:function(e,t,n){var r=n(7854),o=n(2309),i=n(2597),a=n(9711),u=n(6293),l=n(3307),s=r.Symbol,c=o("wks"),f=l?s["for"]||s:s&&s.withoutSetter||a;e.exports=function(e){return i(c,e)||(c[e]=u&&i(s,e)?s[e]:f("Symbol."+e)),c[e]}},7658:function(e,t,n){"use strict";var r=n(2109),o=n(7908),i=n(6244),a=n(3658),u=n(7207),l=n(7293),s=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),c=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},f=s||!c();r({target:"Array",proto:!0,arity:1,forced:f},{push:function(e){var t=o(this),n=i(t),r=arguments.length;u(n+r);for(var l=0;l<r;l++)t[n]=arguments[l],n++;return a(t,n),n}})},7203:function(t){"use strict";t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var i=n[e]={exports:{}};return t[e].call(i.exports,i,i.exports,r),i.exports}!function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p=""}();var o={};return function(){"use strict";if(r.r(o),r.d(o,{DraggableContainer:function(){return H},default:function(){return D}}),"undefined"!==typeof window){var e=window.document.currentScript,t=e&&e.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);t&&(r.p=t[1])}var n=r(7203);r(7658);const i=Symbol("Vue3DraggableResizable");function a(e){const t=window.getComputedStyle(e);return{width:parseFloat(t.getPropertyValue("width")),height:parseFloat(t.getPropertyValue("height"))}}function u(e){return(t,n,r)=>{t&&("string"===typeof n&&(n=[n]),n.forEach((n=>t[e](n,r,{passive:!1}))))}}const l=u("addEventListener"),s=u("removeEventListener");function c(e){if(e&&e.length>0){const t=[];return e.forEach((e=>{j.includes(e)&&!t.includes(e)&&t.push(e)})),t}return[]}function f(){return String(Math.random()).substr(2)+String(Date.now())}function p(e,t,n){if(e.disabled.value)return null;const r={row:[],col:[]},{parentWidth:o,parentHeight:i}=t;r.row.push(...e.adsorbRows),r.col.push(...e.adsorbCols),e.adsorbParent.value&&(r.row.push(0,i.value,i.value/2),r.col.push(0,o.value,o.value/2));const a=e.getPositionStore(n);Object.values(a).forEach((({x:e,y:t,w:n,h:o})=>{r.row.push(t,t+o,t+o/2),r.col.push(e,e+n,e+n/2)}));const u={row:r.row.reduce(((e,t)=>({...e,[t]:{min:t-5,max:t+5,value:t}})),{}),col:r.col.reduce(((e,t)=>({...e,[t]:{min:t-5,max:t+5,value:t}})),{})};return u}function d(e){const t=(0,n.ref)(e),r=e=>(t.value=e,e);return[t,r]}function h(e,t){const[r,o]=d(0!==e.w?e.w:e.initW),[i,a]=d(0!==e.h?e.h:e.initH),[u,l]=d(e.x),[s,c]=d(e.y),[p,h]=d(e.active),[v,g]=d(!1),[m,y]=d(!1),[b,x]=d(""),[w,S]=d(e.maxW),[M,j]=d(e.maxH),[z,O]=d(e.minW),[P,R]=d(e.minH),[H,L]=d(e.parentScaleX),[D,W]=d(e.parentScaleY),[E,T]=d(e.triggerKey),N=(0,n.computed)((()=>i.value/r.value));return(0,n.watch)(r,(e=>{t("update:w",e)}),{immediate:!0}),(0,n.watch)(i,(e=>{t("update:h",e)}),{immediate:!0}),(0,n.watch)(s,(e=>{t("update:y",e)})),(0,n.watch)(u,(e=>{t("update:x",e)})),(0,n.watch)(p,((e,n)=>{t("update:active",e),!n&&e?t("activated"):n&&!e&&t("deactivated")})),(0,n.watch)((()=>e.active),(e=>{h(e)})),(0,n.watch)((()=>e.parentScaleX),(()=>{L(e.parentScaleX)})),(0,n.watch)((()=>e.parentScaleY),(()=>{W(e.parentScaleY)})),(0,n.watch)((()=>e.triggerKey),(()=>{T(e.triggerKey)})),{id:f(),width:r,height:i,top:s,left:u,enable:p,dragging:v,resizing:m,resizingHandle:b,resizingMaxHeight:M,resizingMaxWidth:w,resizingMinWidth:z,resizingMinHeight:P,aspectRatio:N,parentScaleX:H,parentScaleY:D,triggerKey:E,setEnable:h,setDragging:g,setResizing:y,setResizingHandle:x,setResizingMaxHeight:j,setResizingMaxWidth:S,setResizingMinWidth:O,setResizingMinHeight:R,DSMsetWidth:e=>o(Math.floor(e)),DSMsetHeight:e=>a(Math.floor(e)),DSMsetTop:e=>c(Math.floor(e)),DSMsetLeft:e=>l(Math.floor(e))}}function v(e,t){const r=(0,n.ref)(0),o=(0,n.ref)(0);return(0,n.onMounted)((()=>{(0,n.watch)((()=>t.parent),(t=>{if(t&&e.value&&e.value.parentElement){const{width:t,height:n}=a(e.value.parentElement);r.value=t,o.value=n}}),{immediate:!0})})),{parentWidth:r,parentHeight:o}}function g(e,t,r){const{width:o,height:i,left:a,top:u,resizingMaxWidth:l,resizingMaxHeight:s,resizingMinWidth:c,resizingMinHeight:f}=r,{DSMsetWidth:p,DSMsetHeight:d,DSMsetTop:h,DSMsetLeft:v}=r,{parentWidth:g,parentHeight:m}=t,y={minWidth:(0,n.computed)((()=>c.value)),minHeight:(0,n.computed)((()=>f.value)),maxWidth:(0,n.computed)((()=>{let t=l.value;return e.parent&&(t=Math.min(g.value,l.value)),t})),maxHeight:(0,n.computed)((()=>{let t=s.value;return e.parent&&(t=Math.min(m.value,s.value)),t})),minLeft:(0,n.computed)((()=>e.parent?0:-1/0)),minTop:(0,n.computed)((()=>e.parent?0:-1/0)),maxLeft:(0,n.computed)((()=>e.parent?g.value-o.value:1/0)),maxTop:(0,n.computed)((()=>e.parent?m.value-i.value:1/0))},b={setWidth(t){return e.disabledW?o.value:p(Math.min(y.maxWidth.value,Math.max(y.minWidth.value,t)))},setHeight(t){return e.disabledH?i.value:d(Math.min(y.maxHeight.value,Math.max(y.minHeight.value,t)))},setTop(t){return e.disabledY?u.value:h(Math.min(y.maxTop.value,Math.max(y.minTop.value,t)))},setLeft(t){return e.disabledX?a.value:v(Math.min(y.maxLeft.value,Math.max(y.minLeft.value,t)))}};return{...y,...b}}const m=["mousedown","touchstart"],y=["mouseup","touchend"],b=["mousemove","touchmove"];function x(e){return"touches"in e?[e.touches[0].pageX,e.touches[0].pageY]:[e.pageX,e.pageY]}function w(e,t,r,o,i,a,u){const{left:c,top:f,width:d,height:h,dragging:v,id:g}=t,{setDragging:w,setEnable:S,setResizing:M,setResizingHandle:j,parentScaleX:z,parentScaleY:O,triggerKey:P}=t,{setTop:R,setLeft:H}=r;let L=0,D=0,W=0,E=0,T=null;const N=document.documentElement,C=t=>{const n=t.target;e.value?.contains(n)||(S(!1),w(!1),M(!1),j(""))},A=()=>{w(!1),s(N,y,A),s(N,b,F),T=null,a&&(a.updatePosition(g,{x:c.value,y:f.value,w:d.value,h:h.value}),a.setMatchedLine(null))},F=t=>{t.preventDefault();const n="right"==P.value?3:1;if(n!=t.which)return;if(!v.value||!e.value)return;const[r,o]=x(t),u=(r-W)/z.value,l=(o-E)/O.value;let s=L+u,c=D+l;if(null!==T){const e={col:[s,s+d.value/2,s+d.value],row:[c,c+h.value/2,c+h.value]},t={row:e.row.map(((e,t)=>{let n=null;return Object.values(T.row).forEach((t=>{e>=t.min&&e<=t.max&&(n=t.value)})),null!==n&&(0===t?c=n:1===t?c=Math.floor(n-h.value/2):2===t&&(c=Math.floor(n-h.value))),n})).filter((e=>null!==e)),col:e.col.map(((e,t)=>{let n=null;return Object.values(T.col).forEach((t=>{e>=t.min&&e<=t.max&&(n=t.value)})),null!==n&&(0===t?s=n:1===t?s=Math.floor(n-d.value/2):2===t&&(s=Math.floor(n-d.value))),n})).filter((e=>null!==e))};a.setMatchedLine(t)}i("dragging",{x:H(s),y:R(c)})},k=e=>{o.value&&(w(!0),L=c.value,D=f.value,W=x(e)[0],E=x(e)[1],l(N,b,F),l(N,y,A),a&&!a.disabled.value&&(T=p(a,u,g)))};return(0,n.watch)(v,((e,t)=>{!t&&e?(i("drag-start",{x:c.value,y:f.value}),S(!0),w(!0)):(i("drag-end",{x:c.value,y:f.value}),w(!1))})),(0,n.onMounted)((()=>{const t=e.value;t&&(t.style.left=c+"px",t.style.top=f+"px",l(N,m,C),l(t,m,k))})),(0,n.onUnmounted)((()=>{e.value&&(s(N,m,C),s(N,y,A),s(N,b,F))})),{containerRef:e}}function S(e,t,r,o,i){const{setWidth:a,setHeight:u,setLeft:f,setTop:p}=t,{width:d,height:h,left:v,top:g,aspectRatio:m}=e,{setResizing:w,setResizingHandle:S,setResizingMaxWidth:M,setResizingMaxHeight:j,setResizingMinWidth:z,setResizingMinHeight:O}=e,{parentWidth:P,parentHeight:R}=r;let H=0,L=0,D=0,W=0,E=0,T=0,N=1,C="",A="";const F=document.documentElement,k=e=>{e.preventDefault();let[t,n]=x(e),r=t-E,l=n-T,s=r,c=l;o.lockAspectRatio&&(r=Math.abs(r),l=r*N,(s<0||"m"===A&&c<0)&&(r=-r,l=-l)),"t"===C?(u(L-l),p(W-(h.value-L))):"b"===C&&u(L+l),"l"===A?(a(H-r),f(D-(d.value-H))):"r"===A&&a(H+r),i("resizing",{x:v.value,y:g.value,w:d.value,h:h.value})},B=()=>{i("resize-end",{x:v.value,y:g.value,w:d.value,h:h.value}),S(""),w(!1),M(o.maxW),j(o.maxH),z(o.minW),O(o.minH),s(F,b,k),s(F,y,B)},I=(e,t)=>{if(!o.resizable)return;e.stopPropagation(),S(t),w(!0),C=t[0],A=t[1],m.value&&(["tl","tm","ml","bl"].includes(t)?(C="t",A="l"):(C="b",A="r"));let n=o.minH,r=o.minW;if(n/r>m.value?r=n/m.value:n=r*m.value,z(r),O(n),parent){let e="t"===C?g.value+h.value:R.value-g.value,t="l"===A?v.value+d.value:P.value-v.value;o.lockAspectRatio&&(e/t<m.value?t=e/m.value:e=t*m.value),j(Math.min(e,o.maxH)),M(Math.min(t,o.maxW))}H=d.value,L=h.value,D=v.value,W=g.value;const a=x(e);E=a[0],T=a[1],N=m.value,i("resize-start",{x:v.value,y:g.value,w:d.value,h:h.value}),l(F,b,k),l(F,y,B)};(0,n.onUnmounted)((()=>{s(F,y,B),s(F,b,k)}));const X=(0,n.computed)((()=>o.resizable?c(o.handles):[]));return{handlesFiltered:X,resizeHandleDown:I}}function M(e,t){const{setWidth:r,setHeight:o,setLeft:i,setTop:a}=t;(0,n.watch)((()=>e.w),(e=>{r(e)})),(0,n.watch)((()=>e.h),(e=>{o(e)})),(0,n.watch)((()=>e.x),(e=>{i(e)})),(0,n.watch)((()=>e.y),(e=>{a(e)}))}const j=["tl","tm","tr","ml","mr","bl","bm","br"],z={initW:{type:Number,default:null},initH:{type:Number,default:null},w:{type:Number,default:0},h:{type:Number,default:0},x:{type:Number,default:0},y:{type:Number,default:0},draggable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},disabledX:{type:Boolean,default:!1},disabledY:{type:Boolean,default:!1},disabledW:{type:Boolean,default:!1},disabledH:{type:Boolean,default:!1},minW:{type:Number,default:20},minH:{type:Number,default:20},maxW:{type:Number,default:1/0},maxH:{type:Number,default:1/0},active:{type:Boolean,default:!1},parent:{type:Boolean,default:!1},handles:{type:Array,default:j,validator:e=>c(e).length===e.length},classNameDraggable:{type:String,default:"draggable"},classNameResizable:{type:String,default:"resizable"},classNameDragging:{type:String,default:"dragging"},classNameResizing:{type:String,default:"resizing"},classNameActive:{type:String,default:"active"},classNameHandle:{type:String,default:"handle"},lockAspectRatio:{type:Boolean,default:!1},parentScaleX:{type:Number,default:1},parentScaleY:{type:Number,default:1},triggerKey:{type:String,default:"left"}},O=["activated","deactivated","drag-start","resize-start","dragging","resizing","drag-end","resize-end","update:w","update:h","update:x","update:y","update:active"],P=(0,n.defineComponent)({name:"Vue3DraggableResizable",props:z,emits:O,setup(e,{emit:t}){const r=h(e,t),o=(0,n.inject)("identity");let a=null;o===i&&(a={updatePosition:(0,n.inject)("updatePosition"),getPositionStore:(0,n.inject)("getPositionStore"),disabled:(0,n.inject)("disabled"),adsorbParent:(0,n.inject)("adsorbParent"),adsorbCols:(0,n.inject)("adsorbCols"),adsorbRows:(0,n.inject)("adsorbRows"),setMatchedLine:(0,n.inject)("setMatchedLine")});const u=(0,n.ref)(),l=v(u,e),s=g(e,l,r);w(u,r,s,(0,n.toRef)(e,"draggable"),t,a,l);const c=S(r,s,l,e,t);return M(e,s),{containerRef:u,containerProvider:a,...r,...l,...s,...c}},computed:{style(){return{width:this.width+"px",height:this.height+"px",top:this.top+"px",left:this.left+"px"}},klass(){return{[this.classNameActive]:this.enable,[this.classNameDragging]:this.dragging,[this.classNameResizing]:this.resizing,[this.classNameDraggable]:this.draggable,[this.classNameResizable]:this.resizable}}},mounted(){if(!this.containerRef)return;this.containerRef.ondragstart=()=>!1;const{width:e,height:t}=a(this.containerRef);this.setWidth(null===this.initW?this.w||e:this.initW),this.setHeight(null===this.initH?this.h||t:this.initH),this.containerProvider&&this.containerProvider.updatePosition(this.id,{x:this.left,y:this.top,w:this.width,h:this.height})},render(){return(0,n.h)("div",{ref:"containerRef",class:["vdr-container",this.klass],style:this.style},[this.$slots.default&&this.$slots.default(),...this.handlesFiltered.map((e=>(0,n.h)("div",{class:["vdr-handle","vdr-handle-"+e,this.classNameHandle,`${this.classNameHandle}-${e}`],style:{display:this.enable?"block":"none"},onMousedown:t=>this.resizeHandleDown(t,e),onTouchstart:t=>this.resizeHandleDown(t,e)})))])}});var R=P,H=(0,n.defineComponent)({name:"DraggableContainer",props:{disabled:{type:Boolean,default:!1},adsorbParent:{type:Boolean,default:!0},adsorbCols:{type:Array,default:null},adsorbRows:{type:Array,default:null},referenceLineVisible:{type:Boolean,default:!0},referenceLineColor:{type:String,default:"#f00"}},setup(e){const t=(0,n.reactive)({}),r=(e,n)=>{t[e]=n},o=e=>{const n=Object.assign({},t);return e&&delete n[e],n},a=(0,n.reactive)({matchedLine:null}),u=(0,n.computed)((()=>a.matchedLine&&a.matchedLine.row||[])),l=(0,n.computed)((()=>a.matchedLine&&a.matchedLine.col||[])),s=e=>{a.matchedLine=e};return(0,n.provide)("identity",i),(0,n.provide)("updatePosition",r),(0,n.provide)("getPositionStore",o),(0,n.provide)("setMatchedLine",s),(0,n.provide)("disabled",(0,n.toRef)(e,"disabled")),(0,n.provide)("adsorbParent",(0,n.toRef)(e,"adsorbParent")),(0,n.provide)("adsorbCols",e.adsorbCols||[]),(0,n.provide)("adsorbRows",e.adsorbRows||[]),{matchedRows:u,matchedCols:l}},methods:{renderReferenceLine(){return this.referenceLineVisible?[...this.matchedCols.map((e=>(0,n.h)("div",{style:{width:"0",height:"100%",top:"0",left:e+"px",borderLeft:`1px dashed ${this.referenceLineColor}`,position:"absolute"}}))),...this.matchedRows.map((e=>(0,n.h)("div",{style:{width:"100%",height:"0",left:"0",top:e+"px",borderTop:`1px dashed ${this.referenceLineColor}`,position:"absolute"}})))]:[]}},render(){return(0,n.h)("div",{style:{width:"100%",height:"100%",position:"relative"}},[this.$slots.default&&this.$slots.default(),...this.renderReferenceLine()])}});R.install=e=>(e.component(R.name,R),e.component(H.name,H),e);var L=R,D=L}(),o}()}));
//# sourceMappingURL=Vue3DraggableResizable.umd.min.js.map